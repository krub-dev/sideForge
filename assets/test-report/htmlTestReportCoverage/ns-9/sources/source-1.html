


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > DataLoader</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.sideforge.util</a>
</div>

<h1>Coverage Summary for Class: DataLoader (com.sideforge.util)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">DataLoader</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (5/10)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    97,8%
  </span>
  <span class="absValue">
    (87/89)
  </span>
</td>
</tr>
  <tr>
    <td class="name">DataLoader$$SpringCGLIB$$0</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (5/10)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    97,8%
  </span>
  <span class="absValue">
    (87/89)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.sideforge.util;
&nbsp;
&nbsp;import com.sideforge.model.*;
&nbsp;import com.sideforge.enums.*;
&nbsp;import com.sideforge.repository.*;
&nbsp;import jakarta.transaction.Transactional;
&nbsp;import lombok.RequiredArgsConstructor;
&nbsp;import org.springframework.beans.factory.annotation.Autowired;
&nbsp;import org.springframework.boot.CommandLineRunner;
&nbsp;import org.springframework.stereotype.Component;
&nbsp;
&nbsp;import java.time.LocalDateTime;
&nbsp;
&nbsp;@Component
&nbsp;@RequiredArgsConstructor
&nbsp;public class DataLoader implements CommandLineRunner {
&nbsp;
&nbsp;    @Autowired
&nbsp;    private final UserRepository userRepository;
&nbsp;    @Autowired
&nbsp;    private final AdminRepository adminRepository;
&nbsp;    @Autowired
&nbsp;    private final CustomerRepository customerRepository;
&nbsp;    @Autowired
&nbsp;    private final AssetRepository assetRepository;
&nbsp;    @Autowired
&nbsp;    private final DesignRepository designRepository;
&nbsp;    @Autowired
&nbsp;    private final SceneRepository sceneRepository;
&nbsp;
&nbsp;    @Override
&nbsp;    @Transactional
&nbsp;    public void run(String... args) {
&nbsp;        // Declared here (scope) to use them in other data initialization
<b class="fc">&nbsp;        Customer customer1 = null;</b>
<b class="fc">&nbsp;        Customer customer2 = null;</b>
&nbsp;        Admin admin1;
&nbsp;        Admin admin2;
&nbsp;
&nbsp;        // Admins
<b class="pc">&nbsp;        if (adminRepository.count() == 0) {</b>
<b class="fc">&nbsp;            admin1 = new Admin();</b>
<b class="fc">&nbsp;            admin1.setUsername(&quot;admin1&quot;);</b>
<b class="fc">&nbsp;            admin1.setPasswordHash(&quot;adminpass1&quot;);</b>
<b class="fc">&nbsp;            admin1.setEmail(&quot;admin1@sideforge.com&quot;);</b>
<b class="fc">&nbsp;            admin1.setRole(Role.ADMIN);</b>
&nbsp;
<b class="fc">&nbsp;            admin2 = new Admin();</b>
<b class="fc">&nbsp;            admin2.setUsername(&quot;admin2&quot;);</b>
<b class="fc">&nbsp;            admin2.setPasswordHash(&quot;adminpass2&quot;);</b>
<b class="fc">&nbsp;            admin2.setEmail(&quot;admin2@sideforge.com&quot;);</b>
<b class="fc">&nbsp;            admin2.setRole(Role.ADMIN);</b>
&nbsp;
<b class="fc">&nbsp;            adminRepository.save(admin1);</b>
<b class="fc">&nbsp;            adminRepository.save(admin2);</b>
&nbsp;        }
&nbsp;
&nbsp;        // Customers
<b class="pc">&nbsp;        if (customerRepository.count() == 0) {</b>
<b class="fc">&nbsp;            customer1 = new Customer();</b>
<b class="fc">&nbsp;            customer1.setUsername(&quot;customer1&quot;);</b>
<b class="fc">&nbsp;            customer1.setPasswordHash(&quot;custpass1&quot;);</b>
<b class="fc">&nbsp;            customer1.setEmail(&quot;customer1@sideforge.com&quot;);</b>
<b class="fc">&nbsp;            customer1.setRole(Role.CUSTOMER);</b>
&nbsp;
<b class="fc">&nbsp;            customer2 = new Customer();</b>
<b class="fc">&nbsp;            customer2.setUsername(&quot;customer2&quot;);</b>
<b class="fc">&nbsp;            customer2.setPasswordHash(&quot;custpass2&quot;);</b>
<b class="fc">&nbsp;            customer2.setEmail(&quot;customer2@sideforge.com&quot;);</b>
<b class="fc">&nbsp;            customer2.setRole(Role.CUSTOMER);</b>
&nbsp;
<b class="fc">&nbsp;            customerRepository.save(customer1);</b>
<b class="fc">&nbsp;            customerRepository.save(customer2);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            customer1 = customerRepository.findByUsername(&quot;customer1&quot;).orElse(null);</b>
<b class="nc">&nbsp;            customer2 = customerRepository.findByUsername(&quot;customer2&quot;).orElse(null);</b>
&nbsp;        }
&nbsp;
&nbsp;        // Assets, Designs and Scenes
<b class="pc">&nbsp;        if (assetRepository.count() == 0</b>
<b class="pc">&nbsp;                &amp;&amp; designRepository.count() == 0</b>
<b class="pc">&nbsp;                &amp;&amp; sceneRepository.count() == 0) {</b>
&nbsp;            // Asset 1
<b class="fc">&nbsp;            Asset asset1 = new Asset();</b>
<b class="fc">&nbsp;            asset1.setName(&quot;3D Mug&quot;);</b>
<b class="fc">&nbsp;            asset1.setDescription(&quot;Customizable 3D mug&quot;);</b>
<b class="fc">&nbsp;            asset1.setGlbPath(&quot;/assets/3d/mug.glb&quot;);</b>
<b class="fc">&nbsp;            asset1.setThumbnailDefault(&quot;/assets/img/mug-thumb.png&quot;);</b>
<b class="fc">&nbsp;            asset1.setPartsConfigJson(&quot;{\&quot;handle\&quot;:true,\&quot;color\&quot;:\&quot;white\&quot;}&quot;);</b>
<b class="fc">&nbsp;            assetRepository.save(asset1);</b>
&nbsp;
&nbsp;            // Asset 2
<b class="fc">&nbsp;            Asset asset2 = new Asset();</b>
<b class="fc">&nbsp;            asset2.setName(&quot;3D T-Shirt&quot;);</b>
<b class="fc">&nbsp;            asset2.setDescription(&quot;Basic customizable t-shirt&quot;);</b>
<b class="fc">&nbsp;            asset2.setGlbPath(&quot;/assets/3d/tshirt.glb&quot;);</b>
<b class="fc">&nbsp;            asset2.setThumbnailDefault(&quot;/assets/img/tshirt-thumb.png&quot;);</b>
<b class="fc">&nbsp;            asset2.setPartsConfigJson(&quot;{\&quot;size\&quot;:\&quot;M\&quot;,\&quot;color\&quot;:\&quot;black\&quot;}&quot;);</b>
<b class="fc">&nbsp;            assetRepository.save(asset2);</b>
&nbsp;
&nbsp;            // Design 1 linked to asset1
<b class="fc">&nbsp;            Design design1 = new Design();</b>
<b class="fc">&nbsp;            design1.setName(&quot;Modernist Mug&quot;);</b>
<b class="fc">&nbsp;            design1.setTextureMapUrl(&quot;/textures/mug-modernist.png&quot;);</b>
<b class="fc">&nbsp;            design1.setMaterialsJson(&quot;{\&quot;material\&quot;:\&quot;ceramic\&quot;}&quot;);</b>
<b class="fc">&nbsp;            design1.setPartsColorsJson(&quot;{\&quot;handle\&quot;:\&quot;blue\&quot;}&quot;);</b>
<b class="fc">&nbsp;            design1.setLogoConfigJson(&quot;{\&quot;logo\&quot;:\&quot;/logos/modern.png\&quot;}&quot;);</b>
<b class="fc">&nbsp;            design1.setTextConfigJson(&quot;{\&quot;text\&quot;:\&quot;Hello Mug\&quot;}&quot;);</b>
<b class="fc">&nbsp;            design1.setAsset(asset1);</b>
<b class="fc">&nbsp;            designRepository.save(design1);</b>
&nbsp;
&nbsp;            // Design 2 linked to asset2
<b class="fc">&nbsp;            Design design2 = new Design();</b>
<b class="fc">&nbsp;            design2.setName(&quot;Urban T-Shirt&quot;);</b>
<b class="fc">&nbsp;            design2.setTextureMapUrl(&quot;/textures/tshirt-urban.png&quot;);</b>
<b class="fc">&nbsp;            design2.setMaterialsJson(&quot;{\&quot;material\&quot;:\&quot;cotton\&quot;}&quot;);</b>
<b class="fc">&nbsp;            design2.setPartsColorsJson(&quot;{\&quot;sleeve\&quot;:\&quot;black\&quot;}&quot;);</b>
<b class="fc">&nbsp;            design2.setLogoConfigJson(&quot;{\&quot;logo\&quot;:\&quot;/logos/urban.png\&quot;}&quot;);</b>
<b class="fc">&nbsp;            design2.setTextConfigJson(&quot;{\&quot;text\&quot;:\&quot;Urban Style\&quot;}&quot;);</b>
<b class="fc">&nbsp;            design2.setAsset(asset2);</b>
<b class="fc">&nbsp;            designRepository.save(design2);</b>
&nbsp;
&nbsp;            // Retrieve designs managed by JPA
<b class="fc">&nbsp;            Design managedDesign1 = designRepository.findById(design1.getId()).orElseThrow();</b>
<b class="fc">&nbsp;            Design managedDesign2 = designRepository.findById(design2.getId()).orElseThrow();</b>
&nbsp;
&nbsp;            // Retrieve customers managed by JPA
<b class="fc">&nbsp;            Customer managedCustomer1 = customerRepository.findByUsername(&quot;customer1&quot;).orElse(null);</b>
<b class="fc">&nbsp;            Customer managedCustomer2 = customerRepository.findByUsername(&quot;customer2&quot;).orElse(null);</b>
&nbsp;
&nbsp;            // Scene 1 linked to design1 (user customer1)
<b class="fc">&nbsp;            Scene scene1 = new Scene();</b>
<b class="fc">&nbsp;            scene1.setName(&quot;Mug Scene&quot;);</b>
<b class="fc">&nbsp;            scene1.setLightingConfigJson(&quot;{\&quot;type\&quot;:\&quot;modern\&quot;}&quot;);</b>
<b class="fc">&nbsp;            scene1.setCameraConfigJson(&quot;{\&quot;angle\&quot;:45}&quot;);</b>
<b class="fc">&nbsp;            scene1.setThumbnail(&quot;/scenes/mug-scene-thumb.png&quot;);</b>
<b class="fc">&nbsp;            scene1.setOwner(managedCustomer1);</b>
<b class="fc">&nbsp;            scene1.setDesign(managedDesign1);</b>
<b class="fc">&nbsp;            scene1.setCreatedAt(LocalDateTime.now());</b>
<b class="fc">&nbsp;            scene1.setUpdatedAt(LocalDateTime.now());</b>
<b class="fc">&nbsp;            sceneRepository.save(scene1);</b>
&nbsp;
&nbsp;            // Scene 2 linked to design2 (user customer2)
<b class="fc">&nbsp;            Scene scene2 = new Scene();</b>
<b class="fc">&nbsp;            scene2.setName(&quot;T-Shirt Scene&quot;);</b>
<b class="fc">&nbsp;            scene2.setLightingConfigJson(&quot;{\&quot;type\&quot;:\&quot;shop\&quot;}&quot;);</b>
<b class="fc">&nbsp;            scene2.setCameraConfigJson(&quot;{\&quot;angle\&quot;:30}&quot;);</b>
<b class="fc">&nbsp;            scene2.setThumbnail(&quot;/scenes/tshirt-scene-thumb.png&quot;);</b>
<b class="fc">&nbsp;            scene2.setOwner(managedCustomer2);</b>
<b class="fc">&nbsp;            scene2.setDesign(managedDesign2);</b>
<b class="fc">&nbsp;            scene2.setCreatedAt(LocalDateTime.now());</b>
<b class="fc">&nbsp;            scene2.setUpdatedAt(LocalDateTime.now());</b>
<b class="fc">&nbsp;            sceneRepository.save(scene2);</b>
&nbsp;        }
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-09-15 00:10</div>
</div>
</body>
</html>
